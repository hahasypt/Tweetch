!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="76afa80d-65fd-47d0-ab2f-44681f22089f",e._sentryDebugIdIdentifier="sentry-dbid-76afa80d-65fd-47d0-ab2f-44681f22089f")}catch(e){}}(),(self.webpackChunktwitch_twilight=self.webpackChunktwitch_twilight||[]).push([[56215],{527758:function(e,n,o){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FollowButton_FollowUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FollowUserInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"follow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disableNotifications"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"followButtonFragment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}]},t={};function l(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var o=e.type;"NamedType"===o.kind&&n.add(o.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){l(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){l(e,n)})),e.definitions&&e.definitions.forEach((function(e){l(e,n)}))}i.definitions=i.definitions.concat(o(939465).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};i.definitions.forEach((function(e){if(e.name){var n=new Set;l(e,n),a[e.name.value]=n}})),e.exports=i},309749:function(e,n,o){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FollowButton_UnfollowUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnfollowUserInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unfollowUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"follow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disableNotifications"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"followButtonFragment"},directives:[]}]}}]}}]}}]}}]},t={};function l(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var o=e.type;"NamedType"===o.kind&&n.add(o.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){l(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){l(e,n)})),e.definitions&&e.definitions.forEach((function(e){l(e,n)}))}i.definitions=i.definitions.concat(o(939465).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};i.definitions.forEach((function(e){if(e.name){var n=new Set;l(e,n),a[e.name.value]=n}})),e.exports=i},224192:function(e,n,o){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FollowButton_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"followButtonFragment"},directives:[]}]}}]}}]},t={};function l(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var o=e.type;"NamedType"===o.kind&&n.add(o.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){l(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){l(e,n)})),e.definitions&&e.definitions.forEach((function(e){l(e,n)}))}i.definitions=i.definitions.concat(o(939465).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};i.definitions.forEach((function(e){if(e.name){var n=new Set;l(e,n),a[e.name.value]=n}})),e.exports=i},98152:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LiveNotificationsToggle_ToggleNotifications"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FollowUserInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"follow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"follower"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disableNotifications"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]};function o(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,n)})),e.definitions&&e.definitions.forEach((function(e){o(e,n)}))}var i={};n.definitions.forEach((function(e){if(e.name){var n=new Set;o(e,n),i[e.name.value]=n}})),e.exports=n},382566:function(e,n,o){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"LiveNotificationsToggle_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"followButtonFragment"},directives:[]}]}}]}}]},t={};function l(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var o=e.type;"NamedType"===o.kind&&n.add(o.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){l(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){l(e,n)})),e.definitions&&e.definitions.forEach((function(e){l(e,n)}))}i.definitions=i.definitions.concat(o(939465).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};i.definitions.forEach((function(e){if(e.name){var n=new Set;l(e,n),a[e.name.value]=n}})),e.exports=i},956215:function(e,n,o){"use strict";o.d(n,{W:function(){return be}});var i,t=o(331635),l=o(474848),a=o(296540),r=o(415044),s=o(868238),d=o(191132),u=o(783321),f=o(777952),c=o(131883),v=o(82984),w=o(959340),m=o(914421),g=o(97774),h=o(216042),p=o(564368),k=o(125959),y=o(308129),N=o(128043),b=o(973421),x=o.n(b),F=o(503472),S=o(309749),D=o.n(S),T=o(224192),_=o.n(T),B=function(e){var n,o,i,a=(0,u.n_)(D())[0],r=null!==(i=null===(o=null===(n=e.followData)||void 0===n?void 0:n.user)||void 0===o?void 0:o.displayName)&&void 0!==i?i:e.channelLogin;return(0,l.jsx)(N.K,{title:r?(0,k.hw)("Unfollow {displayName}?",{displayName:r},"UnfollowModal"):(0,k.hw)("Are you sure you want to unfollow?","UnfollowModal"),show:e.showUnfollowDialog,onRequestClose:function(){e.setShowUnfollowDialog(!1)},actionButtonProps:{children:(0,k.hw)("Yes, unfollow","UnfollowModal"),onClick:function(){(0,t.__awaiter)(void 0,void 0,void 0,(function(){var n,o,i,l,r,s,d,u,f,c;return(0,t.__generator)(this,(function(v){switch(v.label){case 0:return a&&(null===(r=null===(l=e.followData)||void 0===l?void 0:l.user)||void 0===r?void 0:r.id)&&e.followData.user.self?(n={unfollowUser:{__typename:"UnfollowUserPayload",follow:{__typename:"Follow",disableNotifications:null!==(u=null===(d=null===(s=e.followData.user.self)||void 0===s?void 0:s.follower)||void 0===d?void 0:d.disableNotifications)&&void 0!==u&&u,user:(0,t.__assign)((0,t.__assign)({},e.followData.user),{self:(0,t.__assign)((0,t.__assign)({},e.followData.user.self),{follower:null})})}}},o=(0,F.De)({targetID:e.followData.user.id},n),[4,a(o)]):[2];case 1:return i=v.sent(),e.onSubmit&&!i.errors&&e.onSubmit(),k.E5.trackAvailability({name:"UnFollowButtonPress",is_available:!(null==i?void 0:i.errors),category:"community",reason:null===(f=null==i?void 0:i.errors)||void 0===f?void 0:f.map((function(e){return e.message})).join(" other_error: ")}),(null===(c=null==i?void 0:i.data)||void 0===c?void 0:c.unfollowUser)&&!i.errors&&(e.trackFollowEvent("unfollow"),(0,F.oR)(_(),{login:e.channelLogin},(function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.self)&&(e=x()(e,(function(e){return e.user.self.follower}),(function(){return null}))),e})),e.onUnfollow&&e.onUnfollow(e.channelLogin)),[2]}}))})),e.setShowUnfollowDialog(!1)},"data-a-target":"modal-unfollow-button"},cancelButtonProps:{children:(0,k.hw)("No, cancel","UnfollowModal")},children:(0,k.hw)("You will no longer receive notifications or see them in your followed channels list.","UnfollowModal")})},I=o(70931),E=o(681685),U=o(369624),j=o(267924),C=o(527758),O=o.n(C),L=o(929789),V=o(706439),A=o(606127),H=o(101966),P=function(e){var n,o,i,s=(0,L.x)(null!==(i=null===(o=null===(n=e.followData)||void 0===n?void 0:n.user)||void 0===o?void 0:o.id)&&void 0!==i?i:""),d=a.useContext(A.xG).addSnackbarToQueue,f=(0,r.wA)(),c=(0,u.n_)(O())[0],v=function(){return(0,t.__awaiter)(void 0,void 0,void 0,(function(){var n,o,i,l,a,r,s,d,u,f,v,m,g,h,p,k,y,N;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return(null===(s=null===(r=e.followData)||void 0===r?void 0:r.user)||void 0===s?void 0:s.id)&&(null===(u=null===(d=e.followData)||void 0===d?void 0:d.user)||void 0===u?void 0:u.displayName)&&(null===(v=null===(f=e.followData)||void 0===f?void 0:f.user)||void 0===v?void 0:v.login)?(n={followUser:{__typename:"FollowUserPayload",follow:{__typename:"Follow",disableNotifications:!1,user:{__typename:"User",id:e.followData.user.id,displayName:e.followData.user.displayName,login:e.followData.user.login,self:{canFollow:!0,__typename:"UserSelfConnection",follower:{__typename:"FollowerEdge",disableNotifications:!1,followedAt:(null===(g=null===(m=e.followData.user.self)||void 0===m?void 0:m.follower)||void 0===g?void 0:g.followedAt)||null}}}},error:null}},o=(0,F.De)({disableNotifications:!1,targetID:e.followData.user.id},n),[4,c(o)]):[2];case 1:return i=t.sent(),(l=null===(k=null===(p=null===(h=null==i?void 0:i.data)||void 0===h?void 0:h.followUser)||void 0===p?void 0:p.error)||void 0===k?void 0:k.code)&&(w(l),l===j.aHg.FORBIDDEN)?(e.setIsBlocked(!0),[2]):(e.onSubmit&&!i.errors&&e.onSubmit(),e.isBlocked&&e.setIsBlocked(!1),(null===(N=null===(y=null==i?void 0:i.data)||void 0===y?void 0:y.followUser)||void 0===N?void 0:N.follow)&&(e.trackFollowEvent("follow"),a=i.data.followUser.follow,(0,F.oR)(_(),{login:e.channelLogin},(function(e){var n=e.user;return n&&n.self?n.self.follower?x()(e,(function(e){return e.user.self.follower.disableNotifications}),(function(){return a.disableNotifications})):x()(e,(function(e){return e.user.self.follower}),(function(){var e,n,o;return{__typename:"FollowerEdge",disableNotifications:a.disableNotifications,followedAt:null===(o=null===(n=null===(e=a.user)||void 0===e?void 0:e.self)||void 0===n?void 0:n.follower)||void 0===o?void 0:o.followedAt}})):e})),e.onFollow&&e.onFollow(e.channelLogin)),[2])}}))}))},w=function(n){var o,i,t;switch(n){case j.aHg.UNVERIFIED_EMAIL:case j.aHg.UNVERIFIED_PHONE:case j.aHg.UNVERIFIED_PHONE_AND_EMAIL:s&&d((0,l.jsx)(V.D,{message:(0,H.Qw)(null!==(o=e.channelName)&&void 0!==o?o:"",n),type:"error",buttonProps:{children:(0,l.jsx)(I.Cb,{linkTo:"https://www.twitch.tv/settings/security",targetBlank:!0,variant:"overlay",underline:!1,children:(0,k.hw)("Verify","UseOnFollow")})}}));break;case j.aHg.TOO_MANY_FOLLOWS:d((0,l.jsx)(V.D,{message:(0,H.OP)(null!==(i=e.channelName)&&void 0!==i?i:""),type:"error"}));break;case j.aHg.FORBIDDEN:d((0,l.jsx)(V.D,{message:(0,H.Hm)(null!==(t=e.channelName)&&void 0!==t?t:""),type:"error"}));break;default:return}},m=e.currentUserLogin?v:function(){var n={};e.followData&&(n.postLoginAction=v,n.targetChannel=e.channelName||e.channelLogin),n.showContext=!0,f((0,U.$5)(E.W.FollowButton,n))};return{onFollow:function(){m(),e.trackFollowEvent("follow_attempt")}}},M=o(134117),W=o(963423),R=o(691177),z=o(759369),Q=o(312663),Y=o(407590),$=o(588702),Z=o(246942),X=o.n(Z),q=o(928778),G=o(98152),J=o.n(G);!function(e){e.Toggle="type_toggle",e.Button="type_button"}(i||(i={}));var K=o(382566),ee=o.n(K),ne=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={isFollowing:!1,disableNotifications:!0},n.toggleNotificationsEnabled=function(){var e,o,i=n.getFollowData();if(i){var t=i&&i.id||"",l={disableNotifications:!n.state.disableNotifications,targetID:t},a={followUser:{__typename:"FollowUserPayload",follow:{__typename:"Follow",user:{__typename:"User",id:t,self:{__typename:"UserSelfConnection",follower:{__typename:"FollowerEdge",disableNotifications:!n.state.disableNotifications}}}}}};n.props.followUser((0,F.De)(l,a)),null===(o=(e=n.props).onToggle)||void 0===o||o.call(e,n.state.disableNotifications),n.setState((function(e){return{disableNotifications:!e.disableNotifications}}))}},n}return(0,t.__extends)(n,e),n.getDerivedStateFromProps=function(e){var n=null;return e.followData&&e.followData?n=e.followData:!e.data||e.data.loading||e.data.error||(n=e.data.user),n?{isFollowing:n&&n.self&&n.self.follower&&null!==n.self.follower.disableNotifications||!1,disableNotifications:!(n&&n.self&&n.self.follower&&null!==n.self.follower.disableNotifications)||n.self.follower.disableNotifications}:null},n.prototype.componentDidMount=function(){var e=this.getFollowData();if(e){var n=e.self&&e.self.follower&&e.self.follower.disableNotifications;this.setState({isFollowing:null!==n||!1,disableNotifications:n})}},n.prototype.render=function(){return this.props.toggleType&&this.props.toggleType===i.Button?this.renderTypeButton(this.props.size):this.renderTypeToggle()},n.prototype.renderTypeButton=function(e){var n=this.state.disableNotifications,o=n?z.t.NotificationBell:z.t.NotificationBellFilled,i=n?z.t.NotificationBellFilled:z.t.NotificationBellOff,t=X()({"live-notifications-wrapper--off":n,"live-notifications-wrapper--on":!n}),a=this.notificationsStatusString();return(0,l.jsx)(w.P,{className:"live-notifications__btn","data-a-target":t,children:(0,l.jsx)(y.DT,{ariaLabel:a,tabIndex:this.props.tabIndex||0,icon:o,iconOnHover:i,type:p.VQ.Secondary,onClick:this.toggleNotificationsEnabled,disabled:!this.state.isFollowing||!!this.props.disabled,background:m.VS.Base,tooltipText:this.props.showTooltips?this.notificationsStatusString():void 0,"data-a-target":"notifications-toggle",size:e})})},n.prototype.notificationsStatusString=function(){return this.state.disableNotifications?(0,k.hw)("Turn notifications on","LiveNotificationsToggle"):(0,k.hw)("Turn notifications off","LiveNotificationsToggle")},n.prototype.renderTypeToggle=function(){var e,n;return this.state.isFollowing?this.state.disableNotifications?(n="live-notifications-toggle__status-text--disabled",e=(0,k.hw)("Opt in to notifications to receive updates on this channel's activity, including when they go live.","LiveNotificationsToggle")):(n="live-notifications-toggle__status-text--enabled",e=(0,k.hw)("You will be notified on this channel's activity, including when they go live.","LiveNotificationsToggle")):(e=(0,k.hw)("Follow this channel to receive notifications when they go live.","LiveNotificationsToggle"),n="live-notifications-toggle__status-text--not-following"),(0,l.jsxs)(w.P,{color:m.Q1.Base,display:m.nl.Flex,flexWrap:m.I4.Wrap,children:[(0,l.jsxs)(w.P,{display:m.nl.Flex,flexWrap:m.I4.NoWrap,fullWidth:!0,justifyContent:m.A9.Between,children:[(0,l.jsx)(w.P,{display:m.nl.Flex,padding:{right:2},children:(0,l.jsx)("span",{children:(0,l.jsx)(Q.N,{fontSize:m.Z4.Size4,bold:!0,children:(0,k.hw)("Notifications","LiveNotificationsToggle")})})}),(0,l.jsx)(w.P,{display:m.nl.Flex,flexShrink:0,children:(0,l.jsx)(Y.l,{onChange:this.toggleNotificationsEnabled,checked:!this.state.disableNotifications,"data-test-selector":"live-notifications-toggle__toggle","data-a-target":"notifications-toggle",disabled:!this.state.isFollowing||!!this.props.disabled})})]}),(0,l.jsx)(w.P,{display:m.nl.InlineFlex,padding:{bottom:1},children:(0,l.jsx)(Q.N,{type:$.M2.Span,color:m.Q1.Alt2,"data-test-selector":n,children:e})})]})},n.prototype.getFollowData=function(){return this.props.followData||this.props.data&&this.props.data.user},n}(a.Component),oe=(0,s.Zz)((0,q._v)(ee(),{options:function(e){var n;return{variables:{login:null!==(n=e.channelLogin)&&void 0!==n?n:""}}},skip:function(e){return!(e.firstPageLoaded&&e.isLoggedIn&&e.channelLogin&&!e.followData)}}),(0,q._v)(J(),{name:"followUser"}))(ne);var ie=(0,r.Ng)((function(e){return{firstPageLoaded:e.session.firstPageLoaded,isLoggedIn:(0,c.M3)(e),darkModeEnabled:(0,R.iR)(e)===W.S.Dark}}))(oe),te=o(734993),le=function(e){var n,o=(0,a.useState)(!0),r=o[0],s=o[1],d=(0,a.useRef)(null),u=(0,a.useRef)(null),f=(0,a.useRef)(null),c=e.followUIType!==M.y.IconOnly,v=ae(e),p=v.icon,N=v.iconOnHover,b=v.text,x=v.type,F=v.typeOnHover,S=v.onClick,D=v.selector,T=v.tooltipText,_=v.notifsTabIndex,I=v.showDialog,E=v.setShowDialog,U=(0,a.useState)(0),j=U[0],C=U[1],O=(0,a.useState)(0),L=O[0],V=O[1];(0,a.useLayoutEffect)((function(){var e,n,o;if((null===(e=d.current)||void 0===e?void 0:e.offsetWidth)&&(null===(n=u.current)||void 0===n?void 0:n.offsetWidth)&&(null===(o=f.current)||void 0===o?void 0:o.offsetWidth)){var i=d.current.offsetWidth,t=u.current.offsetWidth-i;C(i+10),V(t)}}),[]);var A=r?void 0:{durationMs:y.xt,delayMs:y.xt,easing:"ease-in"};return(0,l.jsx)(te.d,{"data-test-selector":M.T.FollowToggleTransformContainer,transformIf:!e.isFollowing,transformValues:{translateX:j},transition:A,children:(0,l.jsxs)(w.P,{display:m.nl.Flex,overflow:m.nE.Hidden,alignItems:m.k2.Center,fullHeight:!0,ref:f,children:[(0,l.jsx)(w.P,{borderRadius:g.Z.Medium,display:m.nl.Flex,justifyContent:m.A9.Center,flexDirection:m.bo.Column,overflow:m.nE.Hidden,children:(0,l.jsx)(w.P,{display:m.nl.Flex,justifyContent:m.A9.Center,flexDirection:m.bo.Column,children:(0,l.jsx)(te.d,{"data-test-selector":M.T.FollowToggleTransformShift,transformIf:e.isFollowing,transformValues:{translateX:L},transition:A,children:(0,l.jsxs)(w.P,{display:m.nl.Flex,alignContent:m.Jx.Center,onMouseEnter:function(){return s(!1)},ref:u,children:[(0,l.jsx)(y.DT,{ariaLabel:e.isFollowing?(0,k.hw)("Unfollow {displayName}",{displayName:e.channelName||""},"AnimatedFollowToggleButtons"):(0,k.hw)("Follow {displayName}",{displayName:e.channelName||""},"AnimatedFollowToggleButtons"),disabled:!e.canFollow&&!e.isFollowing||e.isOwnPage,delayText:e.isFollowing?void 0:750,text:c?b:void 0,overlayButton:e.overlayButton,icon:p,iconOnHover:N,type:x,typeOnHover:F,onClick:S,isFollowing:e.isFollowing,isBlocked:e.isBlocked,preventTransition:r,"data-a-target":D,"data-test-selector":D,background:re(!!e.isFollowing,e.followButtonType),tooltipText:T}),e.isFollowing&&(0,l.jsx)(B,(0,t.__assign)({},e,{showUnfollowDialog:I,setShowUnfollowDialog:E}))]})})})}),!e.isOwnPage&&!e.hideNotificationButton&&(0,l.jsx)(h.S,{margin:{left:1},children:(0,l.jsx)(te.d,{transformIf:e.isFollowing,transformValues:{},fade:te.z.In,transition:{durationMs:y.xt,easing:"ease-in-out"},children:(0,l.jsx)("div",{ref:d,children:(0,l.jsx)(ie,{onToggle:e.onToggleNotifications,channelLogin:e.channelLogin,toggleType:i.Button,tabIndex:_,tooltipDirection:e.tooltipDirection,followData:(null===(n=e.followData)||void 0===n?void 0:n.user)||void 0,showTooltips:e.showTooltips})})})})]})})},ae=function(e){var n=P(e).onFollow,o=(0,a.useState)(!1),i=o[0],t=o[1],l={icon:H.Vg,iconOnHover:H.G$,text:(0,H.Nf)(),type:e.followButtonType||p.VQ.Primary,typeOnHover:void 0,onClick:n,selector:M.T.FollowButton,tooltipText:e.isBlocked?(0,H.CD)():(0,H.Nf)(),notifsTabIndex:-1,showDialog:!1,setShowDialog:function(){}},r={icon:H.cW,iconOnHover:H.vC,text:(0,H.Nf)(),type:p.VQ.Secondary,typeOnHover:p.VQ.Alert,onClick:function(){return t(!0)},selector:M.T.UnfollowButton,tooltipText:(0,H.Qz)(),notifsTabIndex:0,showDialog:i,setShowDialog:t};return e.isFollowing?r:l},re=function(e,n){var o=!!n&&n!==p.VQ.Primary;return e||o?m.VS.Base:m.VS.AccentAlt2},se=o(305528),de=a.memo((function(e){switch(e.size){case p.Mp.Large:return(0,l.jsx)(se.Or,{width:e.fullWidthButton?void 0:95.8,height:36});case p.Mp.Small:return(0,l.jsx)(se.Or,{width:e.fullWidthButton?void 0:73.17,height:24});default:return(0,l.jsx)(se.Or,{width:e.fullWidthButton?void 0:80.09,height:30})}})),ue=o(27346),fe=a.forwardRef((function(e,n){var o,i,r,s=(0,H.Nf)(),d=P(e).onFollow,u=!1!==(null===(r=null===(i=null===(o=e.followData)||void 0===o?void 0:o.user)||void 0===i?void 0:i.self)||void 0===r?void 0:r.canFollow),f=e.followUIType!==M.y.IconOnly,c=e.followUIType!==M.y.TextOnly,v=(0,a.useState)(H.Vg),w=v[0],m=v[1];return(0,l.jsx)(p.$n,(0,t.__assign)({ref:n,disabled:!u,"aria-label":(0,k.hw)("Follow {displayName}",{displayName:e.channelName||""},"StandardFollowButton"),overlay:e.overlayButton,"data-a-target":M.T.FollowButton,icon:c?w:void 0,onClick:function(){var n;null===(n=e.onClick)||void 0===n||n.call(e),d()},size:e.size,tabIndex:e.tabIndex,variant:e.followButtonType||p.VQ.Primary,fullWidth:e.fullWidthButton,onMouseEnter:function(){!e.staticHollowIcons&&c&&m(H.G$)},onMouseLeave:function(){!e.staticHollowIcons&&c&&m(H.Vg)}},(0,ue.Fh)(e),{children:f?s:null}))})),ce=o(990998),ve=o(885139),we=o(666311),me=o(67813),ge=o(723319),he=o(324602),pe=a.forwardRef((function(e,n){var o,i=(0,H.Qz)(),r=e.unfollowUIType!==M.y.IconOnly,s=e.unfollowUIType!==M.y.TextOnly,d=(0,a.useState)((function(){return ce.g})),u=d[0],f=d[1],c=(0,a.useState)(null!==(o=e.unfollowButtonType)&&void 0!==o?o:p.VQ.Secondary),v=c[0],y=c[1],N=(0,a.useState)(!1),b=N[0],x=N[1],F=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.$n,{ref:n,icon:s?u:void 0,onMouseEnter:function(){!e.staticHollowIcons&&s&&f((function(){return ve.L})),y(p.VQ.Alert)},onMouseLeave:function(){var n;!e.staticHollowIcons&&s&&f((function(){return ce.g})),y(null!==(n=e.unfollowButtonType)&&void 0!==n?n:p.VQ.Secondary)},onClick:function(){var n;null===(n=e.onClick)||void 0===n||n.call(e),x(!0)},tabIndex:e.tabIndex,"aria-label":(0,k.hw)("Unfollow {displayName}",{displayName:e.channelName||""},"StandardUnFollowButton"),size:e.size,"data-a-target":M.T.UnfollowButton,"data-test-selector":M.T.UnfollowButton,fullWidth:e.fullWidthButton,variant:v,children:r?i:null}),(0,l.jsx)(B,(0,t.__assign)({},e,{showUnfollowDialog:b,setShowUnfollowDialog:x}))]});return e.hideDropdownWhenFollowing?F:(0,l.jsxs)(w.P,{"data-test-selector":M.T.UnfollowButtonWithDropdown,onMouseLeave:function(){return e.setShowDropdown(!1)},fullWidth:!0,children:[(0,l.jsxs)(w.P,{display:m.nl.Flex,children:[(0,l.jsx)(h.S,{borderRadius:{bottomRight:g.Z.None,topRight:g.Z.None},children:F}),(0,l.jsx)(h.S,{position:m.yX.Absolute,children:(0,l.jsx)(we.f,{disabled:!0,dropdown:{onClick:function(){return e.setShowDropdown(!e.showDropdown)},"data-test-selector":M.T.UnfollowButtonDropdownToggleElement,tabIndex:e.tabIndex,"aria-label":(0,H.uu)(),"aria-expanded":e.showDropdown}})})]}),(0,l.jsx)(w.P,{position:m.yX.Absolute,zIndex:m.Py.Default,"data-test-selector":M.T.UnfollowButtonDropdown,children:(0,l.jsx)(me.e,{show:e.showDropdown,type:ge.ES.SlideOverTop,duration:ge.Cf.Short,children:(0,l.jsx)(he.fK,{size:he.$V.Small,"data-a-target":"follow-notifications-balloon",children:(0,l.jsx)(w.P,{padding:1,children:(0,l.jsx)(ie,{channelLogin:e.channelLogin})})})})})]})})),ke=(0,d.U)({name:"FollowButton",category:"discover"}),ye=ke.Available,Ne=ke.Unavailable,be=(0,s.Zz)((0,v.W)("FollowButton"))((function(e){var n,o,i,s,d,f,v,w=null===(n=(0,r.d4)((function(e){return(0,c.wz)(e)})))||void 0===n?void 0:n.login,m=e.channelLogin===w,g=(0,a.useState)(!1),h=g[0],p=g[1],k=!(e.channelLogin&&!e.followData&&!m),y=(0,u.IT)(_(),{variables:{login:null!==(o=e.channelLogin)&&void 0!==o?o:""},skip:k}),N=y.data,b=y.error,x=y.loading,F=(0,a.useState)(null!==(i=e.followData)&&void 0!==i?i:N),S=F[0],D=F[1],T=xe((0,t.__assign)((0,t.__assign)({},e),{followData:S})).trackFollowEvent,B=(0,a.useState)(!!(null===(d=null===(s=null==S?void 0:S.user)||void 0===s?void 0:s.self)||void 0===d?void 0:d.follower)),I=B[0],E=B[1],U=(0,a.useState)(!1),j=U[0],C=U[1],O=(0,a.useState)(!1),L=O[0],V=O[1],A=(0,a.useRef)(null),H=(0,a.useRef)(null);if((0,a.useEffect)((function(){var e,n;if(j&&document.activeElement===document.body){C(!1);var o=null!==(n=null!==(e=A.current)&&void 0!==e?e:H.current)&&void 0!==n?n:null;null==o||o.focus()}}),[I,j]),(0,a.useEffect)((function(){var e,n;N&&(D(N),E(!!(null===(n=null===(e=N.user)||void 0===e?void 0:e.self)||void 0===n?void 0:n.follower)))}),[N]),(0,a.useEffect)((function(){(k||S&&!x)&&e.latencyTracking.reportInteractive()})),m||I&&e.hideWhenFollowing)return null;if(!S&&(b||N&&!N.user)&&!k&&!x)return(0,l.jsx)(Ne,{reason:b?(null==b?void 0:b.message)||"error from GQL":"no user"});if(e.showLoadingPlaceholder&&(!S||x))return(0,l.jsx)(de,{size:e.size,fullWidthButton:e.fullWidthButton});var P=!1!==(null===(v=null===(f=null==S?void 0:S.user)||void 0===f?void 0:f.self)||void 0===v?void 0:v.canFollow),M=(0,t.__assign)((0,t.__assign)({},e),{followData:S,isOwnPage:m,isFollowing:I,canFollow:P,currentUserLogin:w,trackFollowEvent:T,onFollow:function(n){var o;null===(o=e.onFollow)||void 0===o||o.call(e,n),p(!0)},showDropdown:h,setShowDropdown:p,isBlocked:L,setIsBlocked:V});return e.animatedButton?(0,l.jsx)(ye,{children:(0,l.jsx)(le,(0,t.__assign)({},M))}):I?(0,l.jsx)(ye,{children:(0,l.jsx)(pe,(0,t.__assign)({},M,{ref:H,onClick:function(){C(!0)},onSubmit:function(){E(!1)}}))}):(0,l.jsx)(ye,{children:(0,l.jsx)(fe,(0,t.__assign)({},M,{ref:A,onClick:function(){C(!0)},onSubmit:function(){E(!0)}}))})})),xe=function(e){var n=(0,r.d4)((function(e){return e.ui.theatreModeEnabled}));return{trackFollowEvent:function(o){var i;(null===(i=e.followData)||void 0===i?void 0:i.user)&&(0,f.hM)(o,{channelLogin:e.followData.user.login,channelID:e.followData.user.id,src:e.followSource||f.jH.Channel,screen_state:n?f.iv.Theater:f.iv.Regular,content_type:e.followContentType})}}}},308129:function(e,n,o){"use strict";o.d(n,{DT:function(){return k},xt:function(){return p}});var i,t=o(331635),l=o(474848),a=o(959340),r=o(914421),s=o(97774),d=o(564368),u=o(27346),f=o(216042),c=o(411547),v=o(552400),w=o(731667),m=o(10982),g=o(296540),h=o(734993),p=200;!function(e){e.IconTransform="icon-transform",e.TextTransform="text-transform"}(i||(i={}));var k=function(e){var n=(0,g.useRef)(),o=y(e,n),m=o.icon,k=o.iconOnHover,N=o.isFocused,b=o.isIconAnimationEnabled,x=o.offsetPixels,F=o.text,S=o.transitionOn,D=o.fadeText,T=o.onClick,_=o.onFocus,B=o.onBlur,I=o.onIconAnimationComplete,E=o.textRef,U=void 0===e.fullWidthButton||e.fullWidthButton,j=N&&e.typeOnHover?e.typeOnHover:e.type,C=!e.isBlocked&&(!1===e.isFollowing||!e.tooltipText||e.disabled)&&void 0!==F,O=e.text?.5:0,L=Math.abs(x)>15,V=S?p:0;return(0,l.jsx)(a.P,{overflow:r.nE.Hidden,background:e.background,borderRadius:s.Z.Medium,display:r.nl.InlineFlex,children:(0,l.jsx)(d.$n,(0,t.__assign)({ref:function(e){return n.current=null!=e?e:void 0},fullWidth:U,overlay:e.overlayButton,onClick:T,variant:j,tabIndex:e.tabIndex,"aria-label":e.ariaLabel,disabledInteraction:e.disabled,size:e.size||d.Mp.Default,onMouseEnter:function(){return _("mouse")},onMouseLeave:B,onFocus:function(){return _("other")},onBlur:B},(0,u.Fh)(e),{children:(0,l.jsxs)(a.P,{display:r.nl.Flex,justifyContent:r.A9.Center,alignItems:r.k2.Center,children:[(0,l.jsx)(f.S,{display:r.nl.Flex,justifyContent:r.A9.Center,alignItems:r.k2.Center,margin:{right:O},fullHeight:!0,children:(0,l.jsx)(h.d,{"data-test-selector":i.IconTransform,transformIf:N||L,transformValues:{scale:N?1.2:void 0,translateX:L?x/2:void 0},transition:{durationMs:V,easing:"ease"},children:(0,l.jsx)(c.X5,{enabled:b,onAnimationEnd:I,duration:c.J6.Long,type:c.as.BounceIn,children:(0,l.jsx)(a.P,{display:r.nl.Flex,justifyContent:r.A9.Center,alignItems:r.k2.Center,children:(0,l.jsx)(v.m,{label:e.tooltipText,enterDelay:0,disabled:C,show:e.isBlocked&&!e.isFollowing||N&&!C,options:{placement:"top"},children:(0,l.jsx)(w.t,{type:w.H.Inherit,asset:N&&k?k:m})})})})})}),F&&(0,l.jsx)("span",{ref:E,children:(0,l.jsx)(h.d,{"data-test-selector":i.TextTransform,transformIf:D,fade:h.z.Out,transformValues:{},transition:{durationMs:e.disableTextAnimation?0:V,easing:"ease"},children:F})})]})}))})},y=function(e,n){var o=(0,g.useState)(e.text),i=o[0],t=o[1],l=(0,g.useState)(e.text),a=l[0],r=l[1],s=(0,g.useState)(!1),d=s[0],u=s[1],f=(0,g.useState)(!e.preventTransition),c=f[0],v=f[1],w=(0,g.useState)(0),h=w[0],p=w[1],k=(0,g.useState)(e.icon),y=k[0],N=k[1],b=(0,g.useState)(e.iconOnHover),x=b[0],F=b[1],S=(0,g.useState)(!1),D=S[0],T=S[1],_=(0,g.useState)(!(!h&&!e.isFollowing)),B=_[0],I=_[1],E=(0,g.useRef)("other"),U=(0,g.useRef)(null),j=(0,g.useRef)(),C=e.onAnimationEnd,O=function(){t(e.text||""),u(!1)};!function(e,n,o,i){var t=e&&"mouse"===n.current;(0,m.$)((function(){var e;(null===(e=null==i?void 0:i.current)||void 0===e?void 0:e.matches(":hover"))||o()}),t?200:0)}(d,E,O,n);return(0,g.useEffect)((function(){N(e.icon),T(!0)}),[e.icon]),(0,g.useEffect)((function(){F(e.iconOnHover),T(!0)}),[e.iconOnHover]),(0,g.useEffect)((function(){var n,o,i;r(e.text),U.current&&(j.current=(null===(i=null===(o=(n=U.current).getBoundingClientRect)||void 0===o?void 0:o.call(n))||void 0===i?void 0:i.width)||U.current.offsetWidth)}),[e.text]),(0,g.useEffect)((function(){e.text&&setTimeout((function(){I(!!e.isFollowing)}),150)}),[e.isFollowing,e.text]),(0,g.useEffect)((function(){if(i){var n=e.delayText||0;if(!(n<=0)){var o=setTimeout((function(){r(i),t("")}),n);return function(){return clearTimeout(o)}}r(i),t("")}}),[e.delayText,d,i]),(0,g.useEffect)((function(){var e=setTimeout((function(){null==C||C(),u(!1)}),0);return function(){return clearTimeout(e)}}),[D,C]),(0,g.useEffect)((function(){var e,n,o;if(U.current){var i=null!==(o=null===(n=(e=U.current).getBoundingClientRect)||void 0===n?void 0:n.call(e).width)&&void 0!==o?o:U.current.offsetWidth;j.current&&p(i-j.current),j.current=i,requestAnimationFrame((function(){requestAnimationFrame((function(){p(0)}))}))}}),[j,p,U]),{icon:y,iconOnHover:x,isFocused:d,isIconAnimationEnabled:D,offsetPixels:h,text:a,textBuffer:i,transitionOn:c,fadeText:B,onClick:function(n){var o;D||(u(!0),null===(o=e.onClick)||void 0===o||o.call(e,n))},onFocus:function(n){var o;E.current=n;var i=e.text||"";t(null!==(o=e.textOnHover)&&void 0!==o?o:i),u(!0),v(!0)},onBlur:O,onIconAnimationComplete:function(){return T(!1)},textRef:U}}},101966:function(e,n,o){"use strict";o.d(n,{CD:function(){return c},G$:function(){return s},Hm:function(){return w},Nf:function(){return a},OP:function(){return v},Qw:function(){return m},Qz:function(){return d},Vg:function(){return r},cW:function(){return u},uu:function(){return g},vC:function(){return f}});var i=o(759369),t=o(267924),l=o(125959),a=function(){return(0,l.hw)("Follow","FollowButton")},r=i.t.FollowHollow,s=i.t.Heart,d=function(){return(0,l.hw)("Unfollow","FollowButton")},u=i.t.Heart,f=i.t.Unheart,c=function(){return(0,l.hw)("Slow down! Try following more channels later.","FollowButton")},v=function(e){return(0,l.hw)("You're at the channel follow limit. Unfollow another channel to follow {channelName}.",{channelName:e},"FollowButton")},w=function(e){return(0,l.hw)("You cannot follow {channelName} right now.",{channelName:e},"FollowButton")},m=function(e,n){switch(n){case t.aHg.UNVERIFIED_EMAIL:return(0,l.hw)("You cannot follow {channelName} because you have not verified an email address.",{channelName:e},"FollowButton");case t.aHg.UNVERIFIED_PHONE:return(0,l.hw)("You cannot follow {channelName} because you have not verified a phone number.",{channelName:e},"FollowButton");case t.aHg.UNVERIFIED_PHONE_AND_EMAIL:return(0,l.hw)("You cannot follow {channelName} because you have not verified an email address and phone number.",{channelName:e},"FollowButton");default:return""}},g=function(){return(0,l.hw)("Notification Settings","FollowButton")}},134117:function(e,n,o){"use strict";var i,t;o.d(n,{T:function(){return t},y:function(){return i}}),function(e){e[e.IconOnly=0]="IconOnly",e[e.TextOnly=1]="TextOnly",e[e.IconAndText=2]="IconAndText"}(i||(i={})),function(e){e.UnfollowButton="unfollow-button",e.UnfollowButtonWithDropdown="unfollow-button--with-dropdown",e.UnfollowButtonDropdown="unfollow-button__dropdown",e.UnfollowButtonDropdownToggleElement="unfollow-button__dropdown-toggle",e.FollowButton="follow-button",e.FollowToggleTransformContainer="follow-toggle-transform-container",e.FollowToggleTransformShift="follow-toggle-transform-shift"}(t||(t={}))},929789:function(e,n,o){"use strict";o.d(n,{x:function(){return t}});var i=o(125959),t=function(e){return!!e&&"treatment"===i.x2.experiments.__hardcodedStaleExperiment("chmod-vf","treatment")}}}]);