!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="45c4745b-835a-42fe-a8a8-8b2954445241",e._sentryDebugIdIdentifier="sentry-dbid-45c4745b-835a-42fe-a8a8-8b2954445241")}catch(e){}}(),(self.webpackChunktwitch_twilight=self.webpackChunktwitch_twilight||[]).push([[47036],{240207:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoPlayer_VODSeekbarPreviewVideo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includePrivate"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includePrivate"},value:{kind:"Variable",name:{kind:"Name",value:"includePrivate"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"seekPreviewsURL"},arguments:[],directives:[]}]}}]}}]};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}var i={};n.definitions.forEach((function(e){if(e.name){var n=new Set;t(e,n),i[e.name.value]=n}})),e.exports=n},853227:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoPlayer_CollectionContent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}var i={};n.definitions.forEach((function(e){if(e.name){var n=new Set;t(e,n),i[e.name.value]=n}})),e.exports=n},841019:function(e,n,t){"use strict";t.d(n,{U:function(){return i}});var i=function(){function e(e,n){var t=this;this.throttleDuration=0,this.throttled=!1,this.timeout=0,this.unthrottle=function(){t.trailing&&t.trailingFn&&t.trailingFn(),t.clear()},this.throttleDuration=e,this.trailing=!(n&&n.skipTrailing)}return e.prototype.invoke=function(e){this.throttled?this.trailingFn=e:(this.throttled=!0,this.timeout=setTimeout(this.unthrottle,this.throttleDuration),e())},e.prototype.clear=function(){clearTimeout(this.timeout),this.timeout=0,this.throttled=!1,delete this.trailingFn},e}()},470939:function(e,n,t){"use strict";t.d(n,{D:function(){return s},F:function(){return a}});var i=t(917705),o=t(882439),r=t(267924);function a(e,n,t,i){var r=e.match(/\.[^.]*$/);return"".concat(e,"?").concat((0,o.stringify)({token:n,sig:t,"response-content-disposition":(null==i?void 0:i.requestContentAsDownload)?'attachment; filename="'.concat(i.fileName).concat(r,'"'):void 0}))}var s=function(e){var n=e.createdAt,t=e.slug,o=e.assetType===r.p4J.SOURCE,a=isNaN(new Date(n).getTime())?new Date:new Date(n),s=(0,i.format)(a,"YYYYMMDD");return"".concat(s,"_").concat(t,"_").concat(o?"source":"portrait")}},523540:function(e,n,t){"use strict";t.d(n,{FQ:function(){return u},Uk:function(){return l},mO:function(){return s},u5:function(){return d}});var i,o,r=t(125959),a=t(588252),s=((i={twitter:"twitter",reddit:"reddit",vkontake:"vkontakte",facebook:"facebook"}).copy="link",i["copy-input"]="option_link",i.download="download",i.embed="embed",i),u={Game:"TopClipsGame",Channel:"TopClipsChannel"},c=((o={MyClips:"my_clips",ClipsOfMyChannel:"my_clips_channel",TopClipsGame:"clips_game",TopClipsChannel:"channel_clips"}).clips_edit="clips_edit",o.clips_viewing="clips_viewing",o.clips_watch="clips_watch",o),l=function(e,n,t,i,o){return function(a){r.x2.tracking.__track_SSRMigrationFixme("video_share",{vod_id:e,vod_type:"clip",share_platform:s[a],location:c[o],game:n,channel_id:Number(t||0),channel:i,live:null})}},d=function(e,n,t,i,o,s){return function(){r.x2.tracking.__track_SSRMigrationFixme("video_share",{vod_id:e,vod_type:"clip",share_platform:a.tz.Link,location:c[o],game:n,channel_id:Number(t||0),channel:i,live:null,shared_item_url:s})}}},776905:function(e,n,t){"use strict";t.d(n,{P:function(){return f}});var i=t(331635),o=t(474848),r=t(959340),a=t(914421),s=t(724422),u=t(296540),c=t(841019),l=t(261868),d=t(608135),h=t(411869),p=t(381403),v=t(912141),f=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={hoverLocation:0,isMouseOver:!1},n.throttleTimer=new c.U(p.Q),n.handleMouseOverLocationChange=function(e){n.throttleTimer.invoke((function(){n.setState((function(n){return n.hoverLocation===e?null:{hoverLocation:e}}))}))},n.handleMouseOverChange=function(e){n.setState((function(n){return n.isMouseOver===e?null:{isMouseOver:e}}))},n.handleThumbLocationChange=function(e){n.props.onThumbLocationChanged(e)},n}return(0,i.__extends)(n,e),n.prototype.render=function(){var e=this.props,n=e.thumbLocation,t=e.clipLength,i=e.overlay,u=e.alwaysShowThumb,c=e.thumbAriaAttributes,p=t,f=[{type:h.b.FillToThumb,id:"watched-segment",color:s.K["color-twitch-purple-10"]}];return(0,o.jsxs)(r.P,{display:a.nl.Flex,flexDirection:a.bo.Column,alignItems:a.k2.Stretch,children:[(0,o.jsx)(l.l,{currentTimeInSeconds:this.state.hoverLocation,durationInSeconds:p,show:this.state.isMouseOver}),(0,o.jsx)(v.e,{currentTimeInSeconds:n,durationInSeconds:p,overlay:i}),(0,o.jsx)(d.y,{seekbarMin:0,seekbarMax:p,thumbLocation:n,segments:f,onThumbLocationChange:this.handleThumbLocationChange,onMouseOverLocationChange:this.handleMouseOverLocationChange,onMouseOverChange:this.handleMouseOverChange,alwaysShowThumb:u,thumbAriaAttributes:c})]})},n}(u.Component)},912141:function(e,n,t){"use strict";t.d(n,{e:function(){return u}});var i=t(474848),o=t(959340),r=t(914421),a=t(312663),s=(t(296540),t(125959)),u=function(e){var n=e.currentTimeInSeconds,t=e.durationInSeconds,u=Math.floor(Math.max(0,t-n));return(0,i.jsx)(o.P,{display:r.nl.Flex,justifyContent:r.A9.End,className:"vod-seekbar-time-labels",children:(0,i.jsx)(a.N,{color:!1===e.overlay?r.Q1.Base:r.Q1.Overlay,"aria-label":(0,s.hw)("Remaining time in seconds","ClipSeekbar"),children:u})})}},261868:function(e,n,t){"use strict";t.d(n,{l:function(){return b}});var i=t(331635),o=t(474848),r=t(920962),a=t(959340),s=t(914421),u=t(808681),c=t(86011),l=t(324602),d=t(312663),h=t(67813),p=t(723319),v=t(296540),f=t(396113),m=t(245072),g=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={},n.wrapperRef=v.createRef(),n.seekbarRef=null,n.setSeekbarRef=function(e){n.seekbarRef=e},n}return(0,i.__extends)(n,e),n.prototype.render=function(){if(0===this.props.durationInSeconds)return null;var e=(0,m.X)(this.props.currentTimeInSeconds),n=(0,f.K)(this.props.currentTimeInSeconds/this.props.durationInSeconds,this.state.wrapperWidth,this.state.seekbarWidth).offset;return(0,o.jsx)(r.h,{overlay:!0,children:(0,o.jsx)(a.P,{display:s.nl.Flex,ref:this.setSeekbarRef,children:(0,o.jsx)("div",{style:{position:s.yX.Relative,marginInlineStart:"".concat(n,"px")},children:(0,o.jsx)(u.E,{direction:c.j.TopCenter,size:l.$V.Auto,offsetY:"-2rem",show:!0,children:(0,o.jsx)("div",{ref:this.wrapperRef,children:(0,o.jsx)(a.P,{display:s.nl.Flex,justifyContent:s.A9.Center,padding:{x:.5},children:(0,o.jsx)(d.N,{color:s.Q1.Overlay,children:e})})})})})})})},n.prototype.componentDidMount=function(){if(this.wrapperRef.current&&this.seekbarRef){var e=this.wrapperRef.current.getBoundingClientRect().width,n=this.seekbarRef.getBoundingClientRect().width;this.setState({wrapperWidth:e,seekbarWidth:n})}},n}(v.Component),b=function(e){return(0,o.jsx)(h.e,{type:p.ES.Fade,duration:p.Cf.Short,show:e.show,children:(0,o.jsx)(g,(0,i.__assign)({},e))})}},608135:function(e,n,t){"use strict";t.d(n,{y:function(){return _}});var i,o=t(331635),r=t(474848),a=t(296540),s=t(959340),u=t(914421),c=t(97774),l=t(216042),d=t(246942),h=t.n(d),p=t(125959);function v(e,n,t){return n>t?(p.x2.logger.withCategory("clamp-number").warn("Tried to clamp a number, but min is greater than max",{value:e,min:n,max:t}),e):Math.max(n,Math.min(t,e))}!function(e){e.Segment="seekbar-segment__segment"}(i||(i={}));var f,m=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,o.__extends)(n,e),n.prototype.render=function(){var e=this.props,n=e.seekbarMax,t=e.seekbarMin,o=Math.max(n-t,0),a=v(this.props.start,t,n),s=v(this.props.end,t,n),c=(a-t)/o*100,d=Math.max(s-a,0)/o*100,p=h()(["seekbar-segment",this.props.className]);return(0,r.jsx)(l.S,{className:p,position:u.yX.Absolute,children:(0,r.jsx)("span",{style:{insetInlineStart:"".concat(c,"%"),width:"".concat(d,"%"),backgroundColor:this.props.color},"data-test-selector":i.Segment})})},n}(a.PureComponent),g=function(e){var n=e.thumb,t=e.min,i=e.max,a=e.segments,l=Math.max(i-t,0),d=(v(e.thumbLocation,t,i)-t)/l*100;return(0,r.jsxs)(s.P,{className:"seekbar-bar",display:u.nl.Flex,alignItems:u.k2.Center,borderRadius:c.Z.Medium,position:u.yX.Relative,width:"100%",children:[a.map((function(e){return(0,r.jsx)(m,(0,o.__assign)({seekbarMin:t,seekbarMax:i},e),e.id)})),(0,r.jsx)(b,{leftPercentageOffset:d,children:n})]})},b=function(e){var n=v(e.leftPercentageOffset,0,100);return(0,r.jsx)(l.S,{position:u.yX.Absolute,children:(0,r.jsx)("span",{style:{insetInlineStart:"".concat(n,"%")},children:e.children})})};!function(e){e.InteractionArea="seekbar-interaction-area__interactionArea"}(f||(f={}));var k=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.seekbarWrapperRef=a.createRef(),n.touchIdentifier=y,n.handleMouseClick=function(e){n.processMouseEventOrTouch(e,w.Click)},n.handleMouseDown=function(e){n.processMouseEventOrTouch(e,w.DragStart),n.addMouseDocumentHandlers()},n.handleMouseMove=function(e){n.processMouseEventOrTouch(e,w.MouseMove)},n.handleMouseUp=function(e){n.processMouseEventOrTouch(e,w.DragEnd),n.removeDocumentHandlers()},n.handleMouseEnter=function(){n.props.onMouseEnter&&n.props.onMouseEnter()},n.handleMouseLeave=function(){n.props.onMouseLeave&&n.props.onMouseLeave()},n.handleTouchStart=function(e){var t=e.touches[0];n.touchIdentifier=t.identifier,n.processMouseEventOrTouch(t,w.DragStart),n.addTouchDocumentHandlers()},n.addMouseDocumentHandlers=function(){document.addEventListener("mousemove",n.handleDocumentMouseMove),document.addEventListener("mouseup",n.handleDocumentMouseUp)},n.addTouchDocumentHandlers=function(){document.addEventListener("touchmove",n.handleDocumentTouchMove),document.addEventListener("touchend",n.handleDocumentTouchEnd),document.addEventListener("touchcancel",n.handleDocumentTouchEnd)},n.removeDocumentHandlers=function(){document.removeEventListener("mousemove",n.handleDocumentMouseMove),document.removeEventListener("mouseup",n.handleDocumentMouseUp),document.removeEventListener("touchmove",n.handleDocumentTouchMove),document.removeEventListener("touchend",n.handleDocumentTouchEnd),document.removeEventListener("touchcancel",n.handleDocumentTouchEnd)},n.handleDocumentMouseMove=function(e){e.preventDefault&&e.preventDefault(),n.processMouseEventOrTouch(e,w.DragChange)},n.handleDocumentMouseUp=function(e){n.processMouseEventOrTouch(e,w.DragEnd),n.removeDocumentHandlers()},n.handleDocumentTouchMove=function(e){var t=M(n.touchIdentifier,e.touches);t&&n.processMouseEventOrTouch(t,w.DragChange)},n.handleDocumentTouchEnd=function(e){var t=M(n.touchIdentifier,e.changedTouches);t&&(n.touchIdentifier=y,n.processMouseEventOrTouch(t,w.DragEnd),n.removeDocumentHandlers())},n.processMouseEventOrTouch=function(e,t){var i=n.props,r=i.seekbarMin,a=i.seekbarMax,s=i.allowedMin,u=i.allowedMax,c=function(e,n,t,i,r){void 0===r&&(r={});if(!n)return t;var a=function(e){var n=e.eventClientX,t=e.seekbarMin,i=e.seekbarMax,o=e.allowedMax,r=e.allowedMin,a=e.seekbarWrapperRect,s=a.left,u=a.width;if(0===u)return t;var c=v((n-s)/u,0,1);return v(c*(i-t)+t,void 0===r?t:r,void 0===o?i:o)}((0,o.__assign)({seekbarWrapperRect:n.getBoundingClientRect(),eventClientX:e,seekbarMin:t,seekbarMax:i},r));return a}(e.clientX,n.seekbarWrapperRef.current,r,a,{allowedMin:s,allowedMax:u});switch(t){case w.Click:n.props.onClick(c);break;case w.DragStart:n.props.onDragStart(c);break;case w.DragChange:n.props.onDragChange(c);break;case w.DragEnd:n.props.onDragEnd(c);break;case w.MouseMove:n.props.onMouseMove(c)}},n}return(0,o.__extends)(n,e),n.prototype.componentWillUnmount=function(){this.removeDocumentHandlers()},n.prototype.render=function(){return(0,r.jsx)(l.S,{padding:{y:1},className:"seekbar-interaction-area",children:(0,r.jsx)("div",{ref:this.seekbarWrapperRef,onClick:this.handleMouseClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchStart,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-test-selector":f.InteractionArea,"data-a-target":"player-seekbar",children:this.props.children})})},n}(a.Component);function M(e,n){return Array.from(n).find((function(n){return n.identifier===e}))}var w,y=-1;!function(e){e.DragStart="drag-start",e.DragChange="drag-change",e.DragEnd="drag-end",e.Click="click",e.MouseMove="mousemove"}(w||(w={}));var S=t(67813),x=t(723319),D=t(843004),T=function(e){var n,t,i;return(0,r.jsx)(S.e,{show:!!e.show,type:x.ES.Fade,children:(0,r.jsx)(s.P,(0,o.__assign)({},e.ariaAttributes,{"aria-label":(null===(n=e.ariaAttributes)||void 0===n?void 0:n["aria-live"])||null===(t=e.ariaAttributes)||void 0===t?void 0:t["aria-label"],className:"seekbar-thumb",tabIndex:0,children:(0,r.jsx)(D.L,{children:null===(i=e.ariaAttributes)||void 0===i?void 0:i["aria-label"]})}))})},C=t(411869),_=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={draggingThumbLocation:null,isMouseOver:!1},n.handleDragChange=function(e){n.setState({draggingThumbLocation:e})},n.handleDragStart=function(e){n.setState({draggingThumbLocation:e}),n.props.onThumbDragStart&&n.props.onThumbDragStart()},n.handleThumbLocationChange=function(e){n.props.onThumbLocationChange&&n.props.onThumbLocationChange(e),n.setState({draggingThumbLocation:null})},n.handleMouseEnter=function(){n.setState({isMouseOver:!0}),n.props.onMouseOverChange&&n.props.onMouseOverChange(!0)},n.handleMouseLeave=function(){n.setState({isMouseOver:!1}),n.props.onMouseOverChange&&n.props.onMouseOverChange(!1)},n.handleMouseMove=function(e){n.props.onMouseOverLocationChange&&n.props.onMouseOverLocationChange(e)},n}return(0,o.__extends)(n,e),n.prototype.render=function(){var e=this.props,n=e.alwaysShowThumb,t=e.seekbarMin,i=e.seekbarMax,o=e.thumbAriaAttributes,a=this.state,s=a.draggingThumbLocation,u=a.isMouseOver,c=null!==s,l=(0,r.jsx)(T,{ariaAttributes:o,show:u||c||n}),d=null!==s?s:this.props.thumbLocation,h=function(e,n){if(!e)return[];return e.map((function(e){switch(e.type){case C.b.Fixed:return L(e,n);case C.b.AfterThumb:return I(e,n);case C.b.FillToThumb:return O(e,n);default:return null}})).filter((function(e){return!!e}))}(this.props.segments,{seekbarMin:t,thumbLocation:d});return(0,r.jsx)(k,{onDragStart:this.handleDragStart,onDragChange:this.handleDragChange,onDragEnd:this.handleThumbLocationChange,onClick:this.handleThumbLocationChange,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove,seekbarMin:t,seekbarMax:i,allowedMin:this.props.minAllowedThumbLocation,allowedMax:this.props.maxAllowedThumbLocation,children:(0,r.jsx)(g,{min:t,max:i,thumbLocation:d,thumb:l,segments:h})})},n}(a.Component);var L=function(e){return{id:e.id,color:e.color,start:e.start,end:e.end}},I=function(e,n){return{id:e.id,color:e.color,start:n.thumbLocation,end:n.thumbLocation+e.length}},O=function(e,n){return{id:e.id,color:e.color,start:n.seekbarMin,end:n.thumbLocation}}},411869:function(e,n,t){"use strict";var i;t.d(n,{b:function(){return i}}),function(e){e.Fixed="fixed",e.FillToThumb="fill-to-thumb",e.AfterThumb="after-thumb"}(i||(i={}))},381403:function(e,n,t){"use strict";t.d(n,{Q:function(){return U},H:function(){return W}});var i,o=t(331635),r=t(474848),a=t(959340),s=t(914421),u=t(724422),c=t(296540),l=t(841019),d=t(608135),h=t(411869),p=t(67813),v=t(723319),f=t(826094),m=t(868238),g=t(125959),b=t(928778),k=t(711574),M=t(457063),w=t(118483),y=t(286169),S=t(920962),x=t(808681),D=t(86011),T=t(324602),C=t(312663),_=t(245072),L=t(396113);!function(e){e.PreviewImage="vod-seekbar-preview-overlay-preview-image",e.Wrapper="vod-seekbar-preview-overlay-wrapper"}(i||(i={}));var I,O=148,j=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={},n.wrapperRef=c.createRef(),n.seekbarRef=null,n.setSeekbarRef=function(e){n.seekbarRef=e},n}return(0,o.__extends)(n,e),n.prototype.render=function(){if(0===this.props.durationInSeconds)return null;var e=(0,_.X)(this.props.currentTimeInSeconds),n=(0,L.K)(this.props.currentTimeInSeconds/this.props.durationInSeconds,this.state.wrapperWidth,this.state.seekbarWidth).offset;return(0,r.jsx)(S.h,{overlay:!0,children:(0,r.jsx)(a.P,{display:s.nl.Flex,ref:this.setSeekbarRef,children:(0,r.jsx)("div",{className:"vod-seekbar-preview-overlay__wrapper","data-test-selector":i.Wrapper,style:{position:s.yX.Relative,marginInlineStart:"".concat(n,"px")},children:(0,r.jsx)(x.E,{direction:D.j.TopCenter,size:T.$V.Auto,offsetY:"-2rem",show:!0,children:(0,r.jsxs)("div",{ref:this.wrapperRef,children:[this.renderPreviewImage(),(0,r.jsx)(a.P,{display:s.nl.Flex,justifyContent:s.A9.Center,padding:{x:.5},children:(0,r.jsx)(C.N,{color:s.Q1.Overlay,children:e})})]})})})})})},n.prototype.componentDidMount=function(){if(this.wrapperRef.current&&this.seekbarRef){var e=this.wrapperRef.current.getBoundingClientRect().width,n=this.seekbarRef.getBoundingClientRect().width;this.setState({wrapperWidth:e,seekbarWidth:n})}},n.prototype.renderPreviewImage=function(){var e=this.props,n=e.currentTimeInSeconds,t=e.seekPreviewsURL,o=e.seekPreview;if(!t||!o)return null;var a=O/o.width*o.height,u=Math.floor(n/o.interval),c=Math.floor(u/(o.rows*o.cols)),l=u%(o.rows*o.cols),d=o.images[c],h=l%o.cols*O,p=Math.floor(l/o.cols)*a,v=t.substring(0,t.lastIndexOf("/"));return(0,r.jsx)("div",{"data-test-selector":i.PreviewImage,style:{backgroundImage:"url(".concat(v,"/").concat(d,")"),width:O,height:a,backgroundPosition:"-".concat(h,"px -").concat(p,"px"),backgroundSize:"".concat(O*o.cols,"px"),position:s.yX.Relative}})},n}(c.Component),E=t(240207),N=t.n(E);function R(e){return(0,o.__awaiter)(this,void 0,Promise,(function(){var n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,fetch(e)];case 1:if(200===(n=t.sent()).status)return[2,n.json()];throw new Error("Could not fetch seek previews at ".concat(e))}}))}))}function F(e){return e.data&&e.data.video&&e.data.video.seekPreviewsURL}!function(e){e.Low="low",e.High="high"}(I||(I={}));var P=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={},n}return(0,o.__extends)(n,e),n.prototype.render=function(){var e=this.state.seekPreviews,n=F(this.props),t=!!this.props.data&&!this.props.data.loading;return(0,r.jsx)(p.e,{type:v.ES.Fade,duration:v.Cf.Short,show:t&&this.props.show,children:(0,r.jsx)(j,{currentTimeInSeconds:this.props.currentTimeInSeconds,durationInSeconds:this.props.durationInSeconds,seekPreviewsURL:n||void 0,seekPreview:e&&e[0]})})},n.prototype.componentDidUpdate=function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,t,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(!(n=F(this.props))||n===F(e))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,R(n)];case 2:return t=o.sent(),this.setState({seekPreviews:t}),[3,4];case 3:return i=o.sent(),g.vF.warn((0,f.d)(i,{useRawMessage:!0})),[3,4];case 4:return[2]}}))}))},n}(c.Component),A=(0,m.Zz)((0,M.cj)((function(e){return{vodID:(0,w.hq)(e.content),includePrivateVODs:(0,y.wk)({playerPublicPropsContext:e}).includePrivateVODs||!1}})),(0,k.h)(),(0,b._v)(N(),{options:function(e){var n;return{variables:{videoID:null!==(n=e.vodID)&&void 0!==n?n:e.collectionVodID,includePrivate:e.includePrivateVODs||!1}}},skip:function(e){return!e.vodID&&!e.collectionVodID}}))(P),V=function(e){var n=e.currentTimeInSeconds,t=e.durationInSeconds,i=(0,_.X)(n),o=(0,_.X)(t);return(0,r.jsxs)(a.P,{display:s.nl.Flex,justifyContent:s.A9.Between,className:"vod-seekbar-time-labels",children:[(0,r.jsx)(C.N,{"data-a-target":"player-seekbar-current-time",color:s.Q1.Overlay,children:i}),(0,r.jsx)(C.N,{"data-a-target":"player-seekbar-duration","data-a-value":t,color:s.Q1.Overlay,children:o})]})},U=25,W=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={hoverLocation:0,isMouseOver:!1},n.throttleTimer=new l.U(U),n.handleThumbDragStart=function(){n.props.onThumbDragStart()},n.handleThumbLocationChange=function(e){n.props.onThumbLocationChanged(e)},n.handleMouseOverLocationChange=function(e){n.throttleTimer.invoke((function(){n.setState((function(n){return n.hoverLocation===e?null:{hoverLocation:e}}))}))},n.handleMouseOverChange=function(e){n.setState((function(n){return n.isMouseOver===e?null:{isMouseOver:e}}))},n}return(0,o.__extends)(n,e),n.prototype.render=function(){var e,n=this.props,t=n.thumbLocation,i=n.bufferDuration,c=n.vodLength,l=n.mutedSegments,p=n.editingSegments,v=c,f=p?function(e){if(!e)return[];return e.map((function(e,n){var t=e.startOffset,i=e.endOffset;return{type:h.b.Fixed,id:"editing-segment-".concat(n),start:t,end:i,color:u.K["color-yellow"]}}))}(p):(0,o.__spreadArray)([(e=i,{type:h.b.AfterThumb,id:"buffer-segment",color:"hsla(0, 0%, 100%, 0.85)",length:e}),{type:h.b.FillToThumb,id:"watched-segment",color:u.K["color-twitch-purple-10"]}],function(e){return e.map((function(e,n){var t=e.duration,i=e.offset;return{type:h.b.Fixed,id:"muted-segment-".concat(n),start:i,end:i+t,color:"rgba(212, 73, 73, 0.5)"}}))}(l),!0);return(0,r.jsxs)(a.P,{display:s.nl.Flex,flexDirection:s.bo.Column,alignItems:s.k2.Stretch,children:[(0,r.jsx)(A,{currentTimeInSeconds:this.state.hoverLocation,durationInSeconds:v,show:this.state.isMouseOver}),(0,r.jsx)(V,{currentTimeInSeconds:t,durationInSeconds:v}),(0,r.jsx)(d.y,{alwaysShowThumb:!!p,seekbarMin:0,seekbarMax:v,thumbLocation:t,onThumbLocationChange:this.handleThumbLocationChange,onThumbDragStart:this.handleThumbDragStart,onMouseOverLocationChange:this.handleMouseOverLocationChange,onMouseOverChange:this.handleMouseOverChange,segments:f})]})},n}(c.Component)},396113:function(e,n,t){"use strict";function i(e,n,t){if(!n||!t)return{offset:0};var i=e*t,o=n/2;return i<o?{offset:o}:i>t-o?{offset:t-o}:{offset:i}}t.d(n,{K:function(){return i}})},245072:function(e,n,t){"use strict";function i(e){if(e<0||e>259200||!isFinite(e))return"00:00:00";var n=Math.floor(e/3600),t=Math.floor(e%3600/60),i=Math.floor(e%60);return"".concat(o(n,2),":").concat(o(t,2),":").concat(o(i,2))}function o(e,n){var t=e.toString();return t.length<n?"0".repeat(n-t.length)+t:t}t.d(n,{X:function(){return i}})},711574:function(e,n,t){"use strict";t.d(n,{h:function(){return d}});var i=t(331635),o=t(474848),r=t(296540),a=t(783321),s=t(457063),u=t(118483),c=t(853227),l=t.n(c);function d(){return function(e){var n=e;return function(e){var t,c,d=r.useContext(s.kl).content,h=(0,u.P3)(d)?d:null,p=null==h?void 0:h.collectionID,v=null==h?void 0:h.vodID,f=(0,a.IT)(l(),{skip:!(p&&!v),variables:{id:null!=p?p:""}}),m=f.data,g=f.loading,b=f.error,k=null!=v?v:null===(c=null===(t=null==m?void 0:m.collection)||void 0===t?void 0:t.items.edges[0])||void 0===c?void 0:c.node.id;return(0,o.jsx)(n,(0,i.__assign)({},e,{collectionContent:h,collectionLoading:g,collectionError:b,collectionVodID:k}))}}}}}]);